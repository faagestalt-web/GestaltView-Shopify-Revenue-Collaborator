{
  "version": 3,
  "sources": ["../src/cli/services/kitchen-sink/async.ts"],
  "sourcesContent": ["import {renderConcurrent, renderSingleTask, renderTasks} from '@shopify/cli-kit/node/ui'\nimport {AbortSignal} from '@shopify/cli-kit/node/abort'\nimport {outputContent, outputToken, TokenizedString} from '@shopify/cli-kit/node/output'\nimport {Writable} from 'stream'\n\nexport async function asyncTasks() {\n  // renderConcurrent\n  let backendPromiseResolve: () => void\n\n  const backendPromise = new Promise<void>(function (resolve, _reject) {\n    backendPromiseResolve = resolve\n  })\n\n  const backendProcess = {\n    prefix: 'backend',\n    action: async (stdout: Writable, _stderr: Writable, _signal: AbortSignal) => {\n      stdout.write('first backend message')\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n      stdout.write('second backend message')\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n      stdout.write('third backend message')\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n\n      backendPromiseResolve()\n    },\n  }\n\n  const frontendProcess = {\n    prefix: 'frontend',\n    action: async (stdout: Writable, _stderr: Writable, _signal: AbortSignal) => {\n      await backendPromise\n\n      stdout.write('first frontend message')\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n      stdout.write('second frontend message')\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n      stdout.write('third frontend message')\n    },\n  }\n\n  await renderConcurrent({\n    processes: [backendProcess, frontendProcess],\n  })\n\n  // renderTasks\n  const tasks = [\n    {\n      title: 'Installing dependencies',\n      task: async () => {\n        await new Promise((resolve) => setTimeout(resolve, 2000))\n      },\n    },\n    {\n      title: 'Downloading assets',\n      task: async () => {\n        await new Promise((resolve) => setTimeout(resolve, 2000))\n      },\n    },\n  ]\n\n  await renderTasks(tasks)\n\n  // renderSingleTask\n  await renderSingleTask({\n    title: new TokenizedString('Importing data'),\n    task: async (updateStatus: (status: TokenizedString) => void) => {\n      for (let i = 1; i <= 10; i++) {\n        // eslint-disable-next-line no-await-in-loop\n        await new Promise((resolve) => setTimeout(resolve, 500))\n        const status = outputContent`Importing data ${outputToken.italic(\n          outputContent`(${outputToken.green(i.toString())} complete)`,\n        )}`\n        updateStatus(status)\n      }\n      return 'completed'\n    },\n  })\n}\n"],
  "mappings": ";;;;;;;;;;;;;AAAA;AAKA,eAAsB,aAAa;AAEjC,MAAI,uBAEE,iBAAiB,IAAI,QAAc,SAAU,SAAS,SAAS;AACnE,4BAAwB;AAAA,EAC1B,CAAC;AA6BD,QAAM,iBAAiB;AAAA,IACrB,WAAW,CA5BU;AAAA,MACrB,QAAQ;AAAA,MACR,QAAQ,OAAO,QAAkB,SAAmB,YAAyB;AAC3E,eAAO,MAAM,uBAAuB,GACpC,MAAM,IAAI,QAAQ,CAAC,YAAY,WAAW,SAAS,GAAI,CAAC,GACxD,OAAO,MAAM,wBAAwB,GACrC,MAAM,IAAI,QAAQ,CAAC,YAAY,WAAW,SAAS,GAAI,CAAC,GACxD,OAAO,MAAM,uBAAuB,GACpC,MAAM,IAAI,QAAQ,CAAC,YAAY,WAAW,SAAS,GAAI,CAAC,GAExD,sBAAsB;AAAA,MACxB;AAAA,IACF,GAEwB;AAAA,MACtB,QAAQ;AAAA,MACR,QAAQ,OAAO,QAAkB,SAAmB,YAAyB;AAC3E,cAAM,gBAEN,OAAO,MAAM,wBAAwB,GACrC,MAAM,IAAI,QAAQ,CAAC,YAAY,WAAW,SAAS,GAAI,CAAC,GACxD,OAAO,MAAM,yBAAyB,GACtC,MAAM,IAAI,QAAQ,CAAC,YAAY,WAAW,SAAS,GAAI,CAAC,GACxD,OAAO,MAAM,wBAAwB;AAAA,MACvC;AAAA,IACF,CAG6C;AAAA,EAC7C,CAAC,GAkBD,MAAM,YAfQ;AAAA,IACZ;AAAA,MACE,OAAO;AAAA,MACP,MAAM,YAAY;AAChB,cAAM,IAAI,QAAQ,CAAC,YAAY,WAAW,SAAS,GAAI,CAAC;AAAA,MAC1D;AAAA,IACF;AAAA,IACA;AAAA,MACE,OAAO;AAAA,MACP,MAAM,YAAY;AAChB,cAAM,IAAI,QAAQ,CAAC,YAAY,WAAW,SAAS,GAAI,CAAC;AAAA,MAC1D;AAAA,IACF;AAAA,EACF,CAEuB,GAGvB,MAAM,iBAAiB;AAAA,IACrB,OAAO,IAAI,gBAAgB,gBAAgB;AAAA,IAC3C,MAAM,OAAO,iBAAoD;AAC/D,eAAS,IAAI,GAAG,KAAK,IAAI,KAAK;AAE5B,cAAM,IAAI,QAAQ,CAAC,YAAY,WAAW,SAAS,GAAG,CAAC;AACvD,YAAM,SAAS,+BAA+B,YAAY;AAAA,UACxD,iBAAiB,YAAY,MAAM,EAAE,SAAS,CAAC,CAAC;AAAA,QAClD,CAAC;AACD,qBAAa,MAAM;AAAA,MACrB;AACA,aAAO;AAAA,IACT;AAAA,EACF,CAAC;AACH;",
  "names": []
}
